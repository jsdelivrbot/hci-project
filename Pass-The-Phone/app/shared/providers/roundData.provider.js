"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = require("@angular/core");
var nativescript_texttospeech_1 = require("nativescript-texttospeech");
var Sqlite = require("nativescript-sqlite");
var RoundDataProvider = /** @class */ (function () {
    function RoundDataProvider() {
        this.players = [];
        this.groups = [];
        this.teams = [];
        this.hasQuestions = false;
        this.answerCount = 2;
        this.playersInRound = [];
        this.groupFetch_completed = false;
        //set a default boolean for a button to animate when the tts plugin 'speaks'
        this.isSpeaking = false;
        this.hasRemainingPlayers = true;
        this.TTS = new nativescript_texttospeech_1.TNSTextToSpeech();
    }
    // Return a player that haven't played more than authorizes times
    // Returns null if no elligible player. Hence need to go to summary page
    RoundDataProvider.prototype.getRandomPlayer = function (questionAsker) {
        var elligiblePlayers = [];
        var j = 0;
        var k = 0;
        //populate elligible players array
        console.log("question asker: ".concat(questionAsker));
        for (var i = 0; i < this.players.length; i++) {
            if (this.players[i].answerCount < this.answerCount) {
                console.log("question asker: ".concat(this.players[i].name));
                if (this.players[i].name != questionAsker && this.playersInRound.indexOf(this.players[i].name) < 0 && (this.currentPlayer == null || this.players[i].name != this.currentPlayer.name)) {
                    elligiblePlayers[k] = this.players[i];
                    k++;
                }
                j++;
            }
        }
        if (j == 0) {
            return null;
        }
        else {
            this.hasRemainingPlayers = j > 1;
            console.log(j > 1);
            var random = Math.floor(Math.random() * k);
            console.log("random ".concat((random).toString()));
            console.log("elligible ".concat((elligiblePlayers.length).toString()));
            this.playersInRound.push(elligiblePlayers[random].name);
            if (this.playersInRound.length == this.players.length) {
                console.log("round done");
                this.playersInRound = [];
            }
            return elligiblePlayers[random];
        }
    };
    //trouver un ami pour demander une question, code beurk
    RoundDataProvider.prototype.getRandomFriend = function (player) {
        var friends = [];
        player.team.players.forEach(function (p) {
            if (p.name != player.name) {
                friends.push(p);
            }
        });
        var index = Math.floor(Math.random() * friends.length);
        if (index > 0) {
            return friends[index].name;
        }
        else {
            return friends[0].name;
        }
    };
    RoundDataProvider.prototype.speak = function (text) {
        var _this = this;
        this.isSpeaking = true;
        var speakOptions = {
            text: text,
            speakRate: 0.5,
            pitch: 1,
            queue: true,
            finishedCallback: (function () {
                _this.isSpeaking = false;
            })
        };
        this.TTS.speak(speakOptions);
    };
    RoundDataProvider.prototype.stopSpeaking = function () {
        this.isSpeaking = false;
        this.TTS.destroy();
    };
    RoundDataProvider.prototype.calculateTeamCount = function () {
        var teamCount = 0;
        if ((this.players.length % 2 == 0 || this.players.length % 3 == 0) && this.players.length > 3) {
            //team creation of 2 or 3 player is possible
            if (this.players.length % 3 == 0) {
                //teams of 3 will be created
                teamCount = this.players.length / 3;
            }
            else {
                //teams of 2 will be created
                teamCount = this.players.length / 2;
            }
            return teamCount;
        }
        else {
            // no team creation is possible
            return 0;
        }
    };
    RoundDataProvider.prototype.getProgress = function () {
        var questionsAnswered = 0;
        this.players.forEach(function (player) {
            questionsAnswered += player.answerCount;
        });
        return (questionsAnswered / (this.answerCount * this.players.length)) * 100;
    };
    RoundDataProvider.prototype.getPlayersInTeam = function (team) {
        return team.players;
    };
    RoundDataProvider.prototype.getExistingAndRemainingPlayers = function (team) {
        var noTeamPlayers = [];
        var j = 0;
        //populate elligible players array
        for (var i = 0; i < this.players.length; i++) {
            if (this.players[i].team == null /*|| this.players[i].team == team*/) {
                noTeamPlayers[j] = this.players[i];
                j++;
            }
            else if (this.players[i].team.name == team.name) {
                this.players[i].isSelected = true;
                noTeamPlayers[j] = this.players[i];
                j++;
            }
        }
        return noTeamPlayers;
    };
    RoundDataProvider.prototype.clearData = function () {
        console.log("Clearing Data...");
        this.triviaQuestion = null;
        this.currentPlayer = null;
        this.group = null;
        for (var i = 0; i < this.players.length; i++) {
            delete this.players[i];
        }
        for (var i = 0; i < this.teams.length; i++) {
            delete this.teams[i];
        }
        this.players = [];
        this.teams = [];
        this.subjectId = "";
        this.gameMode = "";
    };
    RoundDataProvider = __decorate([
        core_1.Injectable(),
        __metadata("design:paramtypes", [])
    ], RoundDataProvider);
    return RoundDataProvider;
}());
exports.RoundDataProvider = RoundDataProvider;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicm91bmREYXRhLnByb3ZpZGVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsicm91bmREYXRhLnByb3ZpZGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsc0NBQTJDO0FBQzNDLHVFQUEwRTtBQUMxRSxJQUFJLE1BQU0sR0FBRyxPQUFPLENBQUMscUJBQXFCLENBQUMsQ0FBQztBQVU1QztJQWlDSTtRQTVCTyxZQUFPLEdBQWMsRUFBRSxDQUFDO1FBQ3hCLFdBQU0sR0FBYSxFQUFFLENBQUM7UUFDdEIsVUFBSyxHQUFZLEVBQUUsQ0FBQztRQUNwQixpQkFBWSxHQUFZLEtBQUssQ0FBQztRQVk1QixnQkFBVyxHQUFVLENBQUMsQ0FBQztRQUV6QixtQkFBYyxHQUFhLEVBQUUsQ0FBQTtRQUk3Qix5QkFBb0IsR0FBWSxLQUFLLENBQUM7UUFFN0MsNEVBQTRFO1FBQzVFLGVBQVUsR0FBWSxLQUFLLENBQUM7UUFRckIsd0JBQW1CLEdBQVksSUFBSSxDQUFDO1FBSHZDLElBQUksQ0FBQyxHQUFHLEdBQUcsSUFBSSwyQ0FBZSxFQUFFLENBQUM7SUFDckMsQ0FBQztJQUlELGlFQUFpRTtJQUNqRSx3RUFBd0U7SUFDakUsMkNBQWUsR0FBdEIsVUFBdUIsYUFBYTtRQUNoQyxJQUFJLGdCQUFnQixHQUFjLEVBQUUsQ0FBQztRQUNyQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDVixJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDVixrQ0FBa0M7UUFDbEMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxrQkFBa0IsQ0FBQyxNQUFNLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQTtRQUNyRCxHQUFHLENBQUEsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxFQUFDLENBQUMsRUFBRSxFQUFDLENBQUM7WUFDdkMsRUFBRSxDQUFBLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENB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QUFDLENBQUM7WUFDckMsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3pCLENBQUM7UUFFRCxJQUFJLENBQUMsT0FBTyxHQUFFLEVBQUUsQ0FBQztRQUNqQixJQUFJLENBQUMsS0FBSyxHQUFFLEVBQUUsQ0FBQztRQUVmLElBQUksQ0FBQyxTQUFTLEdBQUUsRUFBRSxDQUFDO1FBRW5CLElBQUksQ0FBQyxRQUFRLEdBQUUsRUFBRSxDQUFDO0lBQ3RCLENBQUM7SUFwTFEsaUJBQWlCO1FBRDdCLGlCQUFVLEVBQUU7O09BQ0EsaUJBQWlCLENBNFE3QjtJQUFELHdCQUFDO0NBQUEsQUE1UUQsSUE0UUM7QUE1UVksOENBQWlCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgVE5TVGV4dFRvU3BlZWNoLCBTcGVha09wdGlvbnMgfSBmcm9tICduYXRpdmVzY3JpcHQtdGV4dHRvc3BlZWNoJztcbnZhciBTcWxpdGUgPSByZXF1aXJlKFwibmF0aXZlc2NyaXB0LXNxbGl0ZVwiKTtcblxuaW1wb3J0IHtUcml2aWFRdWVzdGlvbn0gZnJvbSBcIi4uL3RyaXZpYVF1ZXN0aW9uXCI7XG5pbXBvcnQge1RlYW19IGZyb20gXCIuLi90ZWFtXCI7XG5pbXBvcnQge1BsYXllcn0gZnJvbSBcIi4uL3BsYXllclwiO1xuaW1wb3J0IHtHcm91cH0gZnJvbSBcIi4uL2dyb3VwXCI7XG5cblxuXG5ASW5qZWN0YWJsZSgpXG5leHBvcnQgY2xhc3MgUm91bmREYXRhUHJvdmlkZXIge1xuICAgIFxuICAgIHB1YmxpYyB0cml2aWFRdWVzdGlvbjogVHJpdmlhUXVlc3Rpb247XG4gICAgcHVibGljIGN1cnJlbnRQbGF5ZXI6IFBsYXllcjtcbiAgICBwdWJsaWMgZ3JvdXA6IEdyb3VwO1xuICAgIHB1YmxpYyBwbGF5ZXJzIDogUGxheWVyW10gPSBbXTtcbiAgICBwdWJsaWMgZ3JvdXBzIDogR3JvdXBbXSA9IFtdOyAgICBcbiAgICBwdWJsaWMgdGVhbXMgOiBUZWFtW10gPSBbXTtcbiAgICBwdWJsaWMgaGFzUXVlc3Rpb25zOiBib29sZWFuID0gZmFsc2U7XG4gICAgcHVibGljIHBhdGg6IHN0cmluZztcbiAgICBwdWJsaWMgcXVlc3Rpb25zOnN0cmluZ1tdO1xuICAgIHB1YmxpYyBhbnN3ZXJzOltzdHJpbmdbXV07XG4gICAgcHVibGljIHN1YmplY3RJZDogc3RyaW5nO1xuICAgIHB1YmxpYyBzdWJqZWN0TmFtZTogc3RyaW5nO1xuICAgIHB1YmxpYyBjYXRlZ29yeTpzdHJpbmc7XG4gICAgcHVibGljIHR5cGU6c3RyaW5nO1xuICAgIHB1YmxpYyBkaWZmaWN1bHR5OnN0cmluZztcbiAgICBcbiAgICBwdWJsaWMgZ2FtZU1vZGU6IHN0cmluZztcbiAgICBcbiAgICByZWFkb25seSBhbnN3ZXJDb3VudDpudW1iZXIgPSAyO1xuXG4gICAgcHVibGljIHBsYXllcnNJblJvdW5kOiBzdHJpbmdbXSA9IFtdXG4gICAgXG4gICAgcHJpdmF0ZSBkYXRhYmFzZTogYW55O1xuXG4gICAgcHVibGljIGdyb3VwRmV0Y2hfY29tcGxldGVkOiBib29sZWFuID0gZmFsc2U7XG5cbiAgICAvL3NldCBhIGRlZmF1bHQgYm9vbGVhbiBmb3IgYSBidXR0b24gdG8gYW5pbWF0ZSB3aGVuIHRoZSB0dHMgcGx1Z2luICdzcGVha3MnXG4gICAgaXNTcGVha2luZzogYm9vbGVhbiA9IGZhbHNlO1xuICAgIHByaXZhdGUgVFRTOiBUTlNUZXh0VG9TcGVlY2g7XG4gICAgXG4gICAgXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLlRUUyA9IG5ldyBUTlNUZXh0VG9TcGVlY2goKTtcbiAgICB9XG4gICAgXG4gICAgcHVibGljIGhhc1JlbWFpbmluZ1BsYXllcnM6IGJvb2xlYW4gPSB0cnVlO1xuXG4gICAgLy8gUmV0dXJuIGEgcGxheWVyIHRoYXQgaGF2ZW4ndCBwbGF5ZWQgbW9yZSB0aGFuIGF1dGhvcml6ZXMgdGltZXNcbiAgICAvLyBSZXR1cm5zIG51bGwgaWYgbm8gZWxsaWdpYmxlIHBsYXllci4gSGVuY2UgbmVlZCB0byBnbyB0byBzdW1tYXJ5IHBhZ2VcbiAgICBwdWJsaWMgZ2V0UmFuZG9tUGxheWVyKHF1ZXN0aW9uQXNrZXIpe1xuICAgICAgICB2YXIgZWxsaWdpYmxlUGxheWVycyA6IFBsYXllcltdID0gW107XG4gICAgICAgIGxldCBqID0gMDtcbiAgICAgICAgbGV0IGsgPSAwO1xuICAgICAgICAvL3BvcHVsYXRlIGVsbGlnaWJsZSBwbGF5ZXJzIGFycmF5XG4gICAgICAgIGNvbnNvbGUubG9nKFwicXVlc3Rpb24gYXNrZXI6IFwiLmNvbmNhdChxdWVzdGlvbkFza2VyKSlcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8dGhpcy5wbGF5ZXJzLmxlbmd0aDtpKyspe1xuICAgICAgICAgICAgaWYodGhpcy5wbGF5ZXJzW2ldLmFuc3dlckNvdW50PHRoaXMuYW5zd2VyQ291bnQpe1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwicXVlc3Rpb24gYXNrZXI6IFwiLmNvbmNhdCh0aGlzLnBsYXllcnNbaV0ubmFtZSkpXG4gICAgICAgICAgICAgICAgaWYodGhpcy5wbGF5ZXJzW2ldLm5hbWUgIT0gcXVlc3Rpb25Bc2tlciAmJiB0aGlzLnBsYXllcnNJblJvdW5kLmluZGV4T2YodGhpcy5wbGF5ZXJzW2ldLm5hbWUpIDwgMCAmJiAodGhpcy5jdXJyZW50UGxheWVyID09IG51bGwgfHwgdGhpcy5wbGF5ZXJzW2ldLm5hbWUgIT0gdGhpcy5jdXJyZW50UGxheWVyLm5hbWUpKXtcbiAgICAgICAgICAgICAgICAgICAgZWxsaWdpYmxlUGxheWVyc1trXT10aGlzLnBsYXllcnNbaV07XG4gICAgICAgICAgICAgICAgICAgIGsrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaisrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmKGogPT0gMCl7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICB0aGlzLmhhc1JlbWFpbmluZ1BsYXllcnMgPSBqID4gMTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGogPiAxKVxuICAgICAgICAgICAgbGV0IHJhbmRvbSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGspOyBcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwicmFuZG9tIFwiLmNvbmNhdCgocmFuZG9tKS50b1N0cmluZygpKSlcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiZWxsaWdpYmxlIFwiLmNvbmNhdCgoZWxsaWdpYmxlUGxheWVycy5sZW5ndGgpLnRvU3RyaW5nKCkpKVxuICAgICAgICAgICAgdGhpcy5wbGF5ZXJzSW5Sb3VuZC5wdXNoKGVsbGlnaWJsZVBsYXllcnNbcmFuZG9tXS5uYW1lKVxuICAgICAgICAgICAgaWYodGhpcy5wbGF5ZXJzSW5Sb3VuZC5sZW5ndGggPT0gdGhpcy5wbGF5ZXJzLmxlbmd0aCl7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJyb3VuZCBkb25lXCIpXG4gICAgICAgICAgICAgICAgdGhpcy5wbGF5ZXJzSW5Sb3VuZCA9IFtdXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZWxsaWdpYmxlUGxheWVyc1tyYW5kb21dO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vdHJvdXZlciB1biBhbWkgcG91ciBkZW1hbmRlciB1bmUgcXVlc3Rpb24sIGNvZGUgYmV1cmtcbiAgICBwdWJsaWMgZ2V0UmFuZG9tRnJpZW5kKHBsYXllcjogUGxheWVyKXtcbiAgICAgICAgbGV0IGZyaWVuZHMgPSBbXTtcbiAgICAgICAgcGxheWVyLnRlYW0ucGxheWVycy5mb3JFYWNoKHAgPT4ge1xuICAgICAgICAgICAgaWYocC5uYW1lICE9IHBsYXllci5uYW1lKXtcbiAgICAgICAgICAgICAgICBmcmllbmRzLnB1c2gocCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBsZXQgaW5kZXggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqZnJpZW5kcy5sZW5ndGgpO1xuICAgICAgICBpZihpbmRleCA+IDApe1xuICAgICAgICAgICAgcmV0dXJuIGZyaWVuZHNbaW5kZXhdLm5hbWU7XG4gICAgICAgIH0gZWxzZXtcbiAgICAgICAgICAgIHJldHVybiBmcmllbmRzWzBdLm5hbWU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgc3BlYWsodGV4dDogc3RyaW5nKXtcbiAgICAgICAgdGhpcy5pc1NwZWFraW5nID0gdHJ1ZTtcbiAgICAgICAgbGV0IHNwZWFrT3B0aW9uczogU3BlYWtPcHRpb25zID0ge1xuICAgICAgICAgICAgdGV4dDogdGV4dCxcbiAgICAgICAgICAgIHNwZWFrUmF0ZTogMC41LFxuICAgICAgICAgICAgcGl0Y2g6IDEsXG4gICAgICAgICAgICBxdWV1ZTogdHJ1ZSxcbiAgICAgICAgICAgIGZpbmlzaGVkQ2FsbGJhY2s6ICgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5pc1NwZWFraW5nID0gZmFsc2U7XG4gICAgICAgICAgICB9KSAgXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5UVFMuc3BlYWsoc3BlYWtPcHRpb25zKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RvcFNwZWFraW5nKCl7XG4gICAgICAgIHRoaXMuaXNTcGVha2luZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLlRUUy5kZXN0cm95KCk7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyBjYWxjdWxhdGVUZWFtQ291bnQoKXtcbiAgICAgICAgbGV0IHRlYW1Db3VudCA9IDA7XG4gICAgICAgIGlmKCAodGhpcy5wbGF5ZXJzLmxlbmd0aCUyID09IDAgfHwgdGhpcy5wbGF5ZXJzLmxlbmd0aCUzID09IDAgKSAmJiB0aGlzLnBsYXllcnMubGVuZ3RoID4gMykge1xuICAgICAgICAgICAgLy90ZWFtIGNyZWF0aW9uIG9mIDIgb3IgMyBwbGF5ZXIgaXMgcG9zc2libGVcbiAgICAgICAgICAgIGlmKHRoaXMucGxheWVycy5sZW5ndGglMyA9PSAwICl7XG4gICAgICAgICAgICAgICAgLy90ZWFtcyBvZiAzIHdpbGwgYmUgY3JlYXRlZFxuICAgICAgICAgICAgICAgIHRlYW1Db3VudCA9IHRoaXMucGxheWVycy5sZW5ndGgvMztcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIC8vdGVhbXMgb2YgMiB3aWxsIGJlIGNyZWF0ZWRcbiAgICAgICAgICAgICAgICB0ZWFtQ291bnQgPSB0aGlzLnBsYXllcnMubGVuZ3RoLzI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGVhbUNvdW50O1xuICAgICAgICAgICAgXG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgLy8gbm8gdGVhbSBjcmVhdGlvbiBpcyBwb3NzaWJsZVxuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgfVxuXG4gICAgcHVibGljIGdldFByb2dyZXNzKCl7XG4gICAgICAgIHZhciBxdWVzdGlvbnNBbnN3ZXJlZCA6IG51bWJlciA9IDA7XG4gICAgICAgIHRoaXMucGxheWVycy5mb3JFYWNoKHBsYXllciA9PntcbiAgICAgICAgICAgIHF1ZXN0aW9uc0Fuc3dlcmVkICs9IHBsYXllci5hbnN3ZXJDb3VudDtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiAocXVlc3Rpb25zQW5zd2VyZWQvKHRoaXMuYW5zd2VyQ291bnQgKiB0aGlzLnBsYXllcnMubGVuZ3RoKSkgKiAxMDA7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFBsYXllcnNJblRlYW0odGVhbTogVGVhbSk6IFBsYXllcltde1xuICAgICAgICByZXR1cm4gdGVhbS5wbGF5ZXJzO1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgZ2V0RXhpc3RpbmdBbmRSZW1haW5pbmdQbGF5ZXJzKHRlYW06IFRlYW0pOiBQbGF5ZXJbXXtcbiAgICAgICAgdmFyIG5vVGVhbVBsYXllcnMgOiBQbGF5ZXJbXSA9IFtdO1xuICAgICAgICBsZXQgaiA9IDA7XG4gICAgICAgIFxuICAgICAgICAvL3BvcHVsYXRlIGVsbGlnaWJsZSBwbGF5ZXJzIGFycmF5XG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPHRoaXMucGxheWVycy5sZW5ndGg7aSsrKXtcbiAgICAgICAgICAgIGlmKHRoaXMucGxheWVyc1tpXS50ZWFtID09IG51bGwgLyp8fCB0aGlzLnBsYXllcnNbaV0udGVhbSA9PSB0ZWFtKi8gKXtcbiAgICAgICAgICAgICAgICBub1RlYW1QbGF5ZXJzW2pdPXRoaXMucGxheWVyc1tpXTtcbiAgICAgICAgICAgICAgICBqKys7XG4gICAgICAgICAgICB9IGVsc2UgaWYodGhpcy5wbGF5ZXJzW2ldLnRlYW0ubmFtZSA9PSAgdGVhbS5uYW1lKXtcbiAgICAgICAgICAgICAgICB0aGlzLnBsYXllcnNbaV0uaXNTZWxlY3RlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgbm9UZWFtUGxheWVyc1tqXT10aGlzLnBsYXllcnNbaV07XG4gICAgICAgICAgICAgICAgaisrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gbm9UZWFtUGxheWVycztcbiAgICB9XG4gICAgXG4gICAgXG4gICAgcHVibGljIGNsZWFyRGF0YSgpe1xuICAgICAgICBjb25zb2xlLmxvZyhcIkNsZWFyaW5nIERhdGEuLi5cIik7XG4gICAgICAgIHRoaXMudHJpdmlhUXVlc3Rpb24gPSBudWxsOyBcbiAgICAgICAgdGhpcy5jdXJyZW50UGxheWVyPSBudWxsO1xuICAgICAgICB0aGlzLmdyb3VwPSBudWxsO1xuICAgICAgICBcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8dGhpcy5wbGF5ZXJzLmxlbmd0aDtpKyspe1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMucGxheWVyc1tpXTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8dGhpcy50ZWFtcy5sZW5ndGg7aSsrKXtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnRlYW1zW2ldO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB0aGlzLnBsYXllcnM9IFtdO1xuICAgICAgICB0aGlzLnRlYW1zPSBbXTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuc3ViamVjdElkPSBcIlwiO1xuICAgICAgICBcbiAgICAgICAgdGhpcy5nYW1lTW9kZT0gXCJcIjtcbiAgICB9XG4gICAgXG4gICAgLy8gcHVibGljIGNsZWFyR3JvdXBzKCl7XG4gICAgICAgIFxuICAgIC8vICAgICBmb3IobGV0IGkgPSAwOyBpIDx0aGlzLmdyb3Vwcy5sZW5ndGg7aSsrKXtcbiAgICAvLyAgICAgICAgIGRlbGV0ZSB0aGlzLmdyb3Vwc1tpXTtcbiAgICAvLyAgICAgfVxuICAgICAgICBcbiAgICAvLyAgICAgdGhpcy5ncm91cHM9IFtdO1xuICAgIC8vIH1cbiAgICBcbi8vICAgICBwdWJsaWMgaW5zZXJ0X2dyb3VwKGdyb3VwOkdyb3VwKSB7ICAgICAgICBcbi8vICAgICAgICAgdGhpcy5kYXRhYmFzZS5leGVjU1FMKFwiSU5TRVJUIElOVE8gZ3JvdXBzIChuYW1lKSBWQUxVRVMgKD8pXCIsIFtncm91cC5uYW1lXSkudGhlbihpZCA9PiB7XG4vLyAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIklOU0VSVCBSRVNVTFRcIiwgaWQpO1xuLy8gICAgICAgICAgICAgZ3JvdXAuaWQ9aWQ7XG4vLyAgICAgICAgICAgICAvLyB0aGlzLmZldGNoKCk7XG4vLyAgICAgICAgICAgICB0aGlzLmluc2VydF9ncm91cF9wbGF5ZXJzKGdyb3VwKTtcbi8vICAgICAgICAgfSwgZXJyb3IgPT4ge1xuLy8gICAgICAgICAgICAgY29uc29sZS5sb2coXCJJTlNFUlQgRVJST1JcIiwgZXJyb3IpO1xuLy8gICAgICAgICB9KTtcbi8vICAgICB9XG4gICAgXG4vLyAgICAgcHJpdmF0ZSBpbnNlcnRfZ3JvdXBfcGxheWVycyhncm91cDpHcm91cCkge1xuICAgICAgICBcbi8vICAgICAgICAgbGV0IGluc2VydF9wbGF5ZXJzID0gZ3JvdXAucGxheWVycztcbiAgICAgICAgXG4vLyAgICAgICAgIGZvciAodmFyIHBsYXllciBvZiBpbnNlcnRfcGxheWVycyl7XG4vLyAgICAgICAgICAgICB0aGlzLmRhdGFiYXNlLmV4ZWNTUUwoXCJJTlNFUlQgSU5UTyBwbGF5ZXJzIChuYW1lLCBncm91cF9pZCkgVkFMVUVTICg/LCA/KVwiLCBbcGxheWVyLm5hbWUsIGdyb3VwLmlkXSkudGhlbihpZCA9PiB7XG4vLyAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJJTlNFUlQgUkVTVUxUXCIsIGlkKTtcbi8vICAgICAgICAgICAgICAgICAvLyB0aGlzLmZldGNoKCk7XG4vLyAgICAgICAgICAgICB9LCBlcnJvciA9PiB7XG4vLyAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJJTlNFUlQgRVJST1JcIiwgZXJyb3IpO1xuLy8gICAgICAgICAgICAgfSk7XG4vLyAgICAgICAgIH1cbi8vICAgICB9XG4gICAgXG4vLyAgICAgcHVibGljIGZldGNoX2dyb3VwcygpIHtcbi8vICAgICAgICAgLy9UT0RPLiBGZXRjaCByZWNvc3RydWN0cyBvYmplY3RzIGJhc2VkIG9uIGlkLlxuICAgICAgICBcbi8vICAgICAgICAgY29uc29sZS5sb2coXCJmZXRjaGluZyBncm91cHMuLi5cIik7XG4gICAgICAgIFxuLy8gICAgICAgICAvLyB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgIFxuLy8gICAgICAgICB0aGlzLmRhdGFiYXNlLmFsbChcIlNFTEVDVCAqIEZST00gZ3JvdXBzXCIpLnRoZW4ocm93cyA9PiB7XG4vLyAgICAgICAgICAgICB0aGlzLmdyb3VwcyA9IFtdO1xuLy8gICAgICAgICAgICAgZm9yKHZhciByb3cgaW4gcm93cykge1xuLy8gICAgICAgICAgICAgICAgIHRoaXMuZ3JvdXBzLnB1c2goe1xuLy8gICAgICAgICAgICAgICAgICAgICBcImlkXCI6cm93c1tyb3ddWzBdLFxuLy8gICAgICAgICAgICAgICAgICAgICBcIm5hbWVcIjpyb3dzW3Jvd11bMV0sXG4vLyAgICAgICAgICAgICAgICAgICAgIFwicGxheWVyc05hbWVcIjpcIlwiLFxuLy8gICAgICAgICAgICAgICAgICAgICBcInBsYXllcnNcIjpudWxsXG4vLyAgICAgICAgICAgICAgICAgfVxuLy8gICAgICAgICAgICAgKTtcbi8vICAgICAgICAgICAgIGxldCBsYXN0R3JvdXAgPSB0aGlzLmdyb3Vwc1t0aGlzLmdyb3Vwcy5sZW5ndGgtMV07XG4vLyAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIm5ldyBncm91cDogXCIrbGFzdEdyb3VwLm5hbWUpO1xuLy8gICAgICAgICAgICAgbGFzdEdyb3VwLnBsYXllcnM9IHRoaXMuZmV0Y2hfZ3JvdXBfcGxheWVycyhsYXN0R3JvdXApO1xuLy8gICAgICAgICB9XG4vLyAgICAgfSwgZXJyb3IgPT4ge1xuLy8gICAgICAgICBjb25zb2xlLmxvZyhcIlNFTEVDVCBFUlJPUlwiLCBlcnJvcik7XG4vLyAgICAgfSk7XG4vLyAgICAgdGhpcy5ncm91cEZldGNoX2NvbXBsZXRlZD10cnVlO1xuLy8gfVxuXG4vLyBwdWJsaWMgZmV0Y2hfZ3JvdXBfcGxheWVycyhncm91cDpHcm91cCl7XG4vLyAgICAgbGV0IGdyb3VwX3BsYXllcnM6IFBsYXllcltdPVtdO1xuICAgIFxuLy8gICAgIGNvbnNvbGUubG9nKFwiRmV0Y2hpbmcgZ3JvdXAgcGxheWVyczogXCIrZ3JvdXAuaWQpO1xuXG4gICAgXG4vLyAgICAgdGhpcy5kYXRhYmFzZS5hbGwoXCJTRUxFQ1QgKiBGUk9NIHBsYXllcnMgd2hlcmUgaWQgPSAxXCIpLnRoZW4ocm93cyA9PiB7XG4vLyAgICAgICAgIGdyb3VwX3BsYXllcnMgPSBbXTtcbi8vICAgICAgICAgZm9yKHZhciByb3cgaW4gcm93cykge1xuLy8gICAgICAgICAgICAgZ3JvdXBfcGxheWVycy5wdXNoKHtcbi8vICAgICAgICAgICAgICAgICBcImlkXCI6cm93c1tyb3ddWzBdLFxuLy8gICAgICAgICAgICAgICAgIFwibmFtZVwiOnJvd3Nbcm93XVsxXSxcbi8vICAgICAgICAgICAgICAgICBcImFuc3dlckNvdW50XCI6IDAsXG4vLyAgICAgICAgICAgICAgICAgXCJydW5uaW5nUG9pbnRzVG90YWxcIjogMCxcbi8vICAgICAgICAgICAgICAgICBcInRlYW1cIjogbnVsbCxcbi8vICAgICAgICAgICAgICAgICBcImlzU2VsZWN0ZWRcIjpmYWxzZVxuLy8gICAgICAgICAgICAgfSk7XG4vLyAgICAgICAgIH1cbi8vICAgICB9LCBlcnJvciA9PiB7XG4vLyAgICAgICAgIGNvbnNvbGUubG9nKFwiU0VMRUNUIEVSUk9SXCIsIGVycm9yKTtcbi8vICAgICB9KTtcbiAgICBcbi8vICAgICByZXR1cm4gZ3JvdXBfcGxheWVycztcbi8vIH1cblxufSJdfQ==